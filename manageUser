<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>
        <div style="border: 1px solid white; width: 50%;" >
            <ul id="myUL" style="font-size: 25px;"></ul>
        </div> 

        <p id="user_no"></p>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-storage.js"></script>
        <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-analytics.js";
        import {getDatabase, get, ref, set, push,child, onValue,remove,update} from "https://www.gstatic.com/firebasejs/10.7.2/firebase-database.js";
        import { getAuth, setPersistence, browserSessionPersistence, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-auth.js";


        // TODO: Add SDKs for Firebase products that you want to use
        const firebaseConfig = {
            apiKey: "AIzaSyBK0s2IY344TSMqt1no1fySfcvgxozvSuQ",
            authDomain: "databaseezi.firebaseapp.com",
            projectId: "databaseezi",
            storageBucket: "databaseezi.appspot.com",
            messagingSenderId: "500563704547",
            appId: "1:500563704547:web:15bd0c6a9df7a9ba44e3d6",
            measurementId: "G-TYSWSGNT29"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const analytics = getAnalytics(app);
        const dbref = ref(database);

        window.addEventListener('load', GetListUser);
        window.addEventListener('load', calculateUser);

        function calculateUser(){
            get(child(dbref,'number')).then((snapshot)=>{
               user_no.innerHTML = "Total registered user is "+ snapshot.val().user;  
            });
        }

        function GetListUser(){
            const dbref = ref(database);
            get(child(dbref,'user')).then((snapshot)=>{
                snapshot.forEach(std => {
                    ListUser(std);
                    
                });
            });
        }

        function ListUser(std){
            let key = std.key;
            let value = std.val();
            let user = document.createElement('li');
            user.innerHTML = '<a title="Click to View Payment Details" style="text-align:left">User: '+ value.userid + ' email : ' + value.email ;
            myUL.append(user); 
        }

        </script>
    </body>
</html>
